<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <title>Yiting Liu †_º Portfolio</title>

    <link rel="stylesheet" href="./css/index.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container-head">
      <a href="/" class="logo">Líu, Yìtíng</a>
      <div class="container-head-links">
          <a href="./home.html" class="head-link" id="all-projects" onmouseover="chbg('about-me', 'rgb(51,51,51,0.24)')" onmouseout="chbg('about-me', 'rgb(51,51,51,1)')">Home</a>
      </div>
    </div>
    <div class="container-body">
        <div class="container">
            <section id="content">
                <div class="project active">
                    <div class="col-left">
                        <p class="title-text">Hello, I'm Líu, Yìtíng</p>
                    </div>
                </div>
                <div class="project">
                    <div class="col-left">
                        <p class="title-text">Welcome!</p>
                    </div>
                </div>
                <div class="project">
                    <div class="col-left">      
                        <p class="title-text">Hello, Welcome!</p>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <script>
        function chbg(eleId, color) {
            document.getElementById(eleId).style.color = color;
        } 

        (function() {

var projects=document.getElementsByClassName("project");
var projectCount = projects.length;

window.addEventListener('load',load);
// window.addEventListener('wheel',throttle(scroll, 2000));


var index=0; //new project count
var pIndex; //previous project count

function load() {
  var title=document.getElementsByClassName("title-text");
  pIndex=projectCount - 1;
  for(var i=0; i < projectCount; i++){
    title[i].innerHTML=addSpan(title[i].innerHTML);
  }
  repeat();
}

function repeat() {
  setTimeout(function(){
    scroll();
    repeat();
  },3000);
}

function addSpan(str){
  var strArray=str.split(" ");
  var newStr='';
  for(var i=0;i<strArray.length;i++){
    var newStr = newStr+"<span>"+strArray[i]+"</span> ";
  }
  return newStr;
}

function updateProject(){
  projects[index].classList.add("active");
  projects[pIndex].classList.remove("active");
  projects[pIndex].classList.add("disappear");
  setTimeout(function(){
    projects[pIndex].classList.remove("disappear");
  },1500);
}

function throttle(fn, wait) {
  var time = Date.now();
  return function() {
    if ((time + wait - Date.now()) < 0) {
      fn();
      time = Date.now();
    }
  }
}

function scroll(){
  pIndex = index;
  if(index < projects.length-1) index++;
  else index=0;
  updateProject();
}

        })();

    </script>
  </body>
</html>
